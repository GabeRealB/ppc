import _ from 'lodash';

const dataset = {
    "a1": {
        "label": "A1",
        "range": [
            0,
            50
        ],
        "dataPoints": [
            45.917728505381966,
            31.767585016525334,
            37.8402840683063,
            11.666652557200946,
            22.953499996122723,
            2.711958998573766,
            46.18222521262311,
            37.36314937529807,
            38.09738347060613,
            12.699867791203612,
            0.8080897606693671,
            24.377474616416674,
            43.46006983621304,
            49.39738871307906,
            24.832483670649758,
            22.861252756662097,
            24.959965251041833,
            49.28593245350499,
            14.025161571966855,
            9.483121987937793,
            30.325453208284138,
            11.77694431731105,
            15.272101044065616,
            1.3986533931202083,
            49.99449452589577,
            21.808743179989087,
            32.537718436457865,
            29.347922338125258,
            25.938659480900505,
            35.06537319013722,
            22.091008546287867,
            9.877103197296066,
            4.00224882657233,
            23.39545168027178,
            40.928299021743804,
            24.324108403872142,
            34.679291432014324,
            43.6426021922499,
            14.13452581966767,
            5.409392367131666,
            41.523758020653496,
            27.05193629737277,
            40.744611541352796,
            30.408928881303254,
            6.151247497890666,
            10.835474872443301,
            26.9274702936332,
            29.91185371391888,
            33.8210086451173,
            48.035119033137455,
            27.91843644824755,
            20.67101773318975,
            47.821787882061926,
            39.45650789188669,
            2.2841789647988775,
            18.156554483926605,
            45.5556977285208,
            48.386298946097014,
            32.103768794609685,
            43.31470509002241,
            16.6541330617199,
            38.89383918769191,
            11.265894214678173,
            32.704283932963044,
            28.899115115400793,
            10.275751630874169,
            48.430424606190684,
            36.30177594991627,
            23.165029685005873,
            20.80047311933983,
            6.454756044781212,
            11.619901565493295,
            37.954957473609184,
            17.257188430834702,
            17.035744932232006,
            19.743907607605713,
            47.18754521089837,
            35.60852613693758,
            4.224867915790842,
            23.239544220785408,
            6.2347932728220705,
            45.88680432947225,
            37.55442260204704,
            19.636834020302523,
            22.53615432381147,
            0.5359321506301917,
            35.03260499166594,
            0.5000014006449283,
            5.35009638741003,
            3.8403408708912066,
            49.75330977885379,
            23.40989716577874,
            31.118858455295197,
            18.67500118001492,
            19.30197065977467,
            34.355966330413764,
            11.812217487421467,
            7.231988944438362,
            11.306323342210984,
            8.95044133122177,
            0.523262289817461,
            48.213722274867884,
            18.215940145674708,
            0.3510542778158654,
            0.876314906668918,
            45.08233593606706,
            9.335405992464157,
            48.42516709445729,
            3.499698501321269,
            17.380689300150703,
            34.41319458940384,
            47.29270117242221,
            19.242267531480888,
            1.2905420306759952,
            26.423272017149273,
            0.2794338693793863,
            32.43455761655877,
            8.23026846380741,
            30.898930364225148,
            3.0642523635329875,
            40.697585194160354,
            29.17855841174078,
            34.393150347146495,
            34.15499486910178,
            8.0435837115171,
            20.624789578879742,
            27.73004975631268,
            8.225897192657722,
            16.74663612246794,
            32.646613585626106,
            32.976585236482485,
            28.881227025374617,
            30.269769619681085,
            23.850850763635584,
            44.11433625023079,
            33.87540719900099,
            34.696852318015786,
            10.046085346622673,
            33.567351624185335,
            41.912601508506505,
            27.272903533163596,
            49.40412791562099,
            49.31197237985601,
            19.600083051674748,
            11.226357606978427,
            23.92313732527478,
            39.18580108420191,
            36.5812356316851,
            49.533331776181086,
            20.151325011098802,
            8.190778737339555,
            5.6509345394630985,
            31.182266482869863,
            2.251410282869987,
            26.20761263496329,
            14.192637973505112,
            17.342231977884314,
            3.0247556203974346,
            27.158924912025423,
            25.551406925297837,
            15.04099628897046,
            46.316228081490856,
            26.399246330290637,
            41.443847856035696,
            34.56653251315986,
            32.313906704140784,
            24.473370771493453,
            5.877033692591594,
            11.81563244715267,
            4.809789497084877,
            40.694169546789794,
            39.72273453026803,
            6.735225009635215,
            20.44665601540708,
            26.102241241519554,
            32.06730644265409,
            16.290857426270165,
            0.7668774040203608,
            19.70641387600047,
            27.07379990110831,
            12.247068237737773,
            36.4102782503806,
            24.842127681802527,
            40.51018491035816,
            10.101946879689555,
            35.76195265540515,
            39.92881059540237,
            7.89174846306358,
            38.88625978591719,
            31.819262038408745,
            22.64078546448071,
            23.211773687967362,
            30.162000050660065,
            17.96819947923336,
            8.3827340592111,
            35.976195266225474,
            31.488993187975346,
            14.838423051879312,
            42.76705843323503,
            41.25100119381504
        ]
    },
    "a2": {
        "label": "A2",
        "range": [
            100,
            200
        ],
        "dataPoints": [
            188.7394704116178,
            172.51275916593238,
            188.63707843500785,
            140.5906107473972,
            150.05480522761349,
            157.29699290356717,
            189.70494657725916,
            118.38461570063012,
            163.53424028868977,
            149.8108028290565,
            172.05417389268075,
            166.2916836084566,
            196.1893516401847,
            104.01420535268855,
            109.57007849657171,
            102.21010684477365,
            154.08603114453481,
            198.7050610230822,
            183.07033453476294,
            199.146510899332,
            136.77768502910482,
            132.06864531971803,
            196.36778138483098,
            101.69853777871246,
            104.36703643828753,
            105.21747282826001,
            105.55516976221848,
            108.34788603025197,
            192.68211597163554,
            172.66193110617888,
            167.63208215482166,
            185.96460768497622,
            160.2779255488723,
            164.8721030574296,
            178.83857188398213,
            103.48385392508668,
            166.37587207761916,
            192.42118830628195,
            180.17233836254582,
            178.2780460360338,
            111.34338191749295,
            140.31886215821152,
            136.90436233918265,
            117.31716880432788,
            115.40334206013465,
            101.6118174908287,
            139.38890959540043,
            147.80777206926368,
            109.72166684729447,
            136.6083019671611,
            142.8576623673606,
            104.3839470581111,
            191.81547144224285,
            160.41777110696782,
            102.2671425246088,
            187.78022895730555,
            138.59334978439384,
            145.6515609518892,
            199.04754060192573,
            168.1930399116701,
            171.61213199211284,
            132.73382346020372,
            118.05063411080616,
            150.89678633401434,
            186.61629817118884,
            110.72431099206347,
            156.7817357555681,
            193.47307237386553,
            191.71941053991236,
            150.4968524223999,
            162.804303713676,
            149.5267479409529,
            196.05642760459887,
            132.1932821997034,
            116.30901621020277,
            175.64820766987975,
            188.61199727815784,
            120.0956845100437,
            167.62740747963184,
            168.95571366681384,
            119.20625378547251,
            130.55141264949864,
            178.5123316718561,
            179.33853944842213,
            154.1526585188198,
            178.93401774066365,
            163.750176787927,
            100.0145596787576,
            116.03683149078364,
            139.82205942764256,
            137.02162757692287,
            148.0674027008787,
            162.050748243029,
            130.25863578296114,
            128.39558145596092,
            116.64580938796387,
            111.85860432323912,
            170.11797432816064,
            152.58503238253994,
            140.01875266732583,
            133.55990175773945,
            187.99757172084782,
            145.20507270002696,
            171.5516304129151,
            153.72666521169788,
            148.92697265941482,
            187.73611760030465,
            142.65938023099113,
            170.39831916006793,
            180.95832033978,
            110.59112456234477,
            161.3231586544518,
            106.80974989076859,
            148.55147714696704,
            191.59787795072182,
            102.69375488257143,
            161.5139176588142,
            122.92802799547474,
            140.59020173050155,
            161.82097924727844,
            106.12433773444008,
            113.36270370090527,
            132.19514682118722,
            156.20095711446697,
            190.77368771836362,
            104.38245811890063,
            168.5800402259714,
            189.8893742595816,
            179.7894179281663,
            124.52192115143163,
            174.81371118469963,
            195.12953153477656,
            142.8420367746532,
            124.46818244109532,
            152.225660435189,
            168.33801151773,
            147.6280020517105,
            162.35674424248677,
            141.40494735346093,
            189.2882897554208,
            177.3195377491178,
            173.64251379353408,
            115.31346715419289,
            139.9517059525279,
            192.8849676878924,
            195.36637402770185,
            144.4696870088731,
            169.62655937878083,
            111.32990521290702,
            171.0867812715988,
            117.58283977477465,
            173.60092910302382,
            119.95495325916035,
            138.08694151103145,
            153.96838883151256,
            124.23143648725627,
            120.36481764915419,
            164.30579418065568,
            106.96849908451492,
            186.53634109715767,
            104.18583295016535,
            143.90618577917917,
            160.14616432463836,
            139.92853563898274,
            134.12371683402498,
            184.70808547244496,
            131.7651000695858,
            176.0408035926734,
            151.6137875318359,
            193.4517006426084,
            176.67129552208303,
            129.97445796479786,
            157.03549105639738,
            156.24554317760897,
            185.1320417558449,
            176.06653695399186,
            118.84876550157551,
            102.70630237496745,
            103.20728167687115,
            119.78429757586622,
            175.80640630115602,
            150.94746203884569,
            157.4546821764337,
            197.7136471069262,
            183.53940741948045,
            185.00242956757688,
            123.57017176187969,
            149.80446362470354,
            141.50569106913272,
            104.78354975196447,
            169.65036413261674,
            100.4485250615659,
            129.11780492580013,
            162.33626547551552,
            123.28270411366623,
            139.25724874181145,
            168.49969465871914,
            133.80422687524933,
            124.44673228124364,
            184.0594824132759
        ]
    },
    "label": {
        "label": "Label",
        "dataPoints": [
            0,
            1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23,
            24,
            25,
            26,
            27,
            28,
            29,
            30,
            31,
            32,
            33,
            34,
            35,
            36,
            37,
            38,
            39,
            40,
            41,
            42,
            43,
            44,
            45,
            46,
            47,
            48,
            49,
            50,
            51,
            52,
            53,
            54,
            55,
            56,
            57,
            58,
            59,
            60,
            61,
            62,
            63,
            64,
            65,
            66,
            67,
            68,
            69,
            70,
            71,
            72,
            73,
            74,
            75,
            76,
            77,
            78,
            79,
            80,
            81,
            82,
            83,
            84,
            85,
            86,
            87,
            88,
            89,
            90,
            91,
            92,
            93,
            94,
            95,
            96,
            97,
            98,
            99,
            100,
            101,
            102,
            103,
            104,
            105,
            106,
            107,
            108,
            109,
            110,
            111,
            112,
            113,
            114,
            115,
            116,
            117,
            118,
            119,
            120,
            121,
            122,
            123,
            124,
            125,
            126,
            127,
            128,
            129,
            130,
            131,
            132,
            133,
            134,
            135,
            136,
            137,
            138,
            139,
            140,
            141,
            142,
            143,
            144,
            145,
            146,
            147,
            148,
            149,
            150,
            151,
            152,
            153,
            154,
            155,
            156,
            157,
            158,
            159,
            160,
            161,
            162,
            163,
            164,
            165,
            166,
            167,
            168,
            169,
            170,
            171,
            172,
            173,
            174,
            175,
            176,
            177,
            178,
            179,
            180,
            181,
            182,
            183,
            184,
            185,
            186,
            187,
            188,
            189,
            190,
            191,
            192,
            193,
            194,
            195,
            196,
            197,
            198,
            199
        ]
    },
    "class": {
        "label": "Class",
        "range": [
            0,
            1
        ],
        "tickPositions": [
            0.25,
            0.75
        ],
        "tickLabels": [
            "C1",
            "C2"
        ],
        "dataPoints": [
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.25,
            0.75,
            0.75,
            0.75,
            0.25,
            0.25,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.25,
            0.75,
            0.25,
            0.25,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.25,
            0.25,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.25,
            0.25,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.25,
            0.25,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.25,
            0.25,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75,
            0.75,
            0.75,
            0.25,
            0.75,
            0.75
        ]
    }
};

export function createSyntheticDataset(include: string[], samples?: number) {
    const data = {};
    for (const incl of include) {
        data[incl] = window.structuredClone(dataset[incl]);
    }

    const numEntries = dataset[Object.keys(dataset)[0]]['dataPoints'].length;
    const indices = Array.from({ length: numEntries }, (_, i) => i);
    const sampleIndices = new Set<number>(_.sampleSize(indices, samples ? samples : numEntries));

    if (samples !== undefined) {
        for (const key in data) {
            const attr = data[key];
            const dataPoints = attr['dataPoints'].filter((_, idx) => sampleIndices.has(idx))
            attr['dataPoints'] = dataPoints;
        }
    }

    const sampleIndicesArr = Array.from(sampleIndices);
    sampleIndicesArr.sort((a, b) => a - b);
    return { dataset: data, sampleIndices: sampleIndicesArr };
}